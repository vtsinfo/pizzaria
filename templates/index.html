{% extends "base_site.html" %}

{% block head %}
<style>
    .hero-pizza {
        background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),
        url('{{ site_config.imagem_hero_home or "https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=1920&q=80" }}');
        background-size: cover;
        background-position: center;
        padding: 180px 0 120px;
        color: white;
        margin-top: -100px;
        /* Compensa a navbar fixa */
    }

    .card-gourmet {
        background: rgba(33, 37, 41, 0.95);
        border: 1px solid #495057;
        border-radius: 16px;
        overflow: hidden;
        transition: all 0.3s ease;
        height: 100%;
    }

    .card-gourmet:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        border-color: #ffc107;
    }

    .card-gourmet img {
        height: 220px;
        object-fit: cover;
        transition: transform 0.5s ease;
        width: 100%;
    }

    .card-gourmet:hover img {
        transform: scale(1.08);
    }

    a.text-decoration-none:hover h3 {
        color: #ffc107 !important;
    }
</style>
{% endblock %}

{% block content %}
{% if banners and banners|length > 0 %}
<div id="heroCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
    <div class="carousel-inner">
        {% for banner in banners %}
        <div class="carousel-item {{ 'active' if loop.first else '' }}">
            <div class="hero-pizza"
                style="background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('{{ banner.image }}'); background-size: cover; background-position: center;">
                <div class="container reveal visible">
                    <h1 class="display-2 fw-bold mb-4 text-warning" style="font-family: 'Playfair Display', serif;">{{
                        banner.title }}</h1>
                    <p class="lead mb-5 text-light fs-4">{{ banner.subtitle }}</p>
                    <div class="d-flex justify-content-center gap-3">
                        {% if banner.link_text and banner.link_url %}
                        <a href="{{ banner.link_url }}"
                            class="btn btn-warning btn-lg fw-bold px-5 rounded-pill shadow-lg">{{ banner.link_text
                            }}</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% if banners|length > 1 %}
    <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Anterior</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Pr√≥ximo</span>
    </button>
    {% endif %}
</div>
{% else %}
<header class="hero-pizza text-center">
    <div class="container reveal">
        <h1 class="display-2 fw-bold mb-4 text-warning" style="font-family: 'Playfair Display', serif;">A Melhor Pizza
            da Regi√£o</h1>
        <p class="lead mb-5 text-light fs-4">A melhor massa, ingredientes selecionados e tradi√ß√£o desde 1998.</p>
        <div class="d-flex justify-content-center gap-3">
            <a href="{{ url_for('public.cardapio') }}"
                class="btn btn-outline-light btn-lg fw-bold px-5 rounded-pill shadow-lg">Ver
                Card√°pio</a>
            <a href="{{ url_for('public.reservas') }}"
                class="btn btn-outline-light btn-lg fw-bold px-5 rounded-pill">Reservar
                Mesa</a>
        </div>
    </div>
</header>
{% endif %}

<div class="container py-5">
    <div class="row text-center g-4 reveal">
        {% for cat in categorias %}
        <div class="col-md-6 col-lg-3">
            <a href="{{ url_for('public.cardapio') }}" class="text-decoration-none">
                <div class="card-gourmet h-100">
                    <img src="{{ cat.foto_url or 'https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=800&q=80' }}"
                        class="card-img-top" alt="{{ cat.nome }}" style="object-fit: cover; height: 220px;">
                    <div class="p-4">
                        <h3 class="text-warning mb-3 h4" style="font-family: 'Playfair Display', serif;">{{ cat.nome }}
                        </h3>
                        <p class="text-secondary small">Confira nossas op√ß√µes de {{ cat.nome }}.</p>
                    </div>
                </div>
            </a>
        </div>
        {% endfor %}
        {% if site_config.self_service_enabled %}
        <div class="col-md-6 col-lg-3">
            <div class="card-gourmet h-100">
                <img src="{{ url_for('static', filename='img/self_service.png') }}" class="card-img-top"
                    alt="Self-Service">
                <div class="p-4">
                    <h3 class="text-warning mb-3 h4" style="font-family: 'Playfair Display', serif;">ü•ó Self-Service
                    </h3>
                    <p class="text-secondary small">Uma variedade de pratos quentes e saladas frescas para voc√™ se
                        servir.</p>
                    {% if site_config.self_service_days %}
                    <div class="mt-3 pt-3 border-top border-secondary">
                        <p class="text-white small fw-bold mb-0"><i class="fas fa-clock me-2 text-warning"></i>{{
                            site_config.self_service_days }}</p>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}
        {% if site_config.rodizio_carne_enabled %}
        <div class="col-md-6 col-lg-3">
            <div class="card-gourmet h-100">
                <img src="https://images.unsplash.com/photo-1555939594-58d7cb561ad1?auto=format&fit=crop&w=800&q=80"
                    class="card-img-top" alt="Rod√≠zio de Carnes">
                <div class="p-4">
                    <h3 class="text-warning mb-3 h4" style="font-family: 'Playfair Display', serif;">üçñ Rod√≠zio de
                        Carnes</h3>
                    <p class="text-secondary small">Os melhores cortes selecionados servidos √† vontade.</p>
                    {% if site_config.rodizio_carne_days %}
                    <div class="mt-3 pt-3 border-top border-secondary">
                        <p class="text-white small fw-bold mb-0"><i class="fas fa-clock me-2 text-warning"></i>{{
                            site_config.rodizio_carne_days }}</p>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}
        {% if site_config.rodizio_pizza_enabled %}
        <div class="col-md-6 col-lg-3">
            <div class="card-gourmet h-100">
                <img src="https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=800&q=80"
                    class="card-img-top" alt="Rod√≠zio de Pizzas">
                <div class="p-4">
                    <h3 class="text-warning mb-3 h4" style="font-family: 'Playfair Display', serif;">üçï Rod√≠zio de
                        Pizzas</h3>
                    <p class="text-secondary small">Sabores ilimitados, da tradicional √† doce.</p>
                    {% if site_config.rodizio_pizza_days %}
                    <div class="mt-3 pt-3 border-top border-secondary">
                        <p class="text-white small fw-bold mb-0"><i class="fas fa-clock me-2 text-warning"></i>{{
                            site_config.rodizio_pizza_days }}</p>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>

<section class="py-5 bg-dark border-top border-secondary">
    <div class="container reveal">
        <div class="text-center mb-5">
            <h2 class="text-warning display-5" style="font-family: 'Playfair Display', serif;">O que dizem nossos
                clientes</h2>
            <p class="text-secondary">A satisfa√ß√£o de quem ama pizza de verdade.</p>
        </div>
        <div class="row g-4">
            {% if depoimentos %}
            {% for dep in depoimentos %}
            <div class="col-md-4">
                <div class="card bg-black border-secondary text-light h-100 p-3">
                    <div class="card-body text-center">
                        <div class="mb-3 text-warning fs-5">
                            {% for n in range(dep.nota) %}<i class="fas fa-star"></i>{% endfor %}
                            {% for n in range(5 - dep.nota) %}<i class="far fa-star"></i>{% endfor %}
                        </div>
                        <p class="card-text fst-italic">"{{ dep.texto }}"</p>
                        <footer class="blockquote-footer mt-3 text-secondary">{{ dep.nome }}</footer>
                    </div>
                </div>
            </div>
            {% endfor %}
            {% else %}
            <!-- Fallback se n√£o houver depoimentos -->
            <div class="col-md-4">
                <div class="card bg-black border-secondary text-light h-100 p-3">
                    <div class="card-body text-center">
                        <div class="mb-3 text-warning fs-5">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                                class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="card-text fst-italic">"A melhor pizza da regi√£o! A massa √© leve e o recheio √© super
                            generoso. O atendimento tamb√©m √© nota 10."</p>
                        <footer class="blockquote-footer mt-3 text-secondary">Mariana Souza</footer>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card bg-black border-secondary text-light h-100 p-3">
                    <div class="card-body text-center">
                        <div class="mb-3 text-warning fs-5">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                                class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="card-text fst-italic">"O rod√≠zio √© incr√≠vel, muita variedade e tudo muito saboroso.
                            Ambiente familiar perfeito para ir com as crian√ßas."</p>
                        <footer class="blockquote-footer mt-3 text-secondary">Carlos Eduardo</footer>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card bg-black border-secondary text-light h-100 p-3">
                    <div class="card-body text-center">
                        <div class="mb-3 text-warning fs-5">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                                class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
                        </div>
                        <p class="card-text fst-italic">"Sempre pe√ßo pelo delivery e chega quentinha. O hamb√∫rguer
                            artesanal tamb√©m √© sensacional!"</p>
                        <footer class="blockquote-footer mt-3 text-secondary">Fernanda Lima</footer>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</section>

<section class="py-5 bg-black border-top border-secondary">
    <div class="container reveal">
        <div class="text-center mb-5">
            <h2 class="text-warning display-5" style="font-family: 'Playfair Display', serif;">Nossas Unidades</h2>
            <p class="text-secondary">Encontre a Colonial mais pr√≥xima de voc√™.</p>
        </div>
        <div class="row g-4">
            <!-- Unidades Din√¢micas -->
            {% if site_config.units %}
            {% for unit in site_config.units %}
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 bg-dark border-secondary text-light">
                    <div class="card-body">
                        <h5 class="card-title text-warning mb-3">{{ unit.name }}</h5>
                        <p class="card-text small text-secondary mb-2"><i class="fas fa-map-marker-alt me-2"></i>{{
                            unit.address }}</p>
                        <p class="card-text small text-secondary"><i class="fas fa-phone me-2"></i>{{ unit.phone }}</p>
                        {% if unit.whatsapp %}
                        <p class="card-text small text-secondary"><i class="fab fa-whatsapp me-2"></i>{{ unit.whatsapp
                            }}</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
            {% else %}
            <div class="col-12 text-center text-muted">
                <p>Nenhuma unidade cadastrada.</p>
            </div>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}